
<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="drone-status.html">
<link rel="import" href="drone-theme.html">
<link rel="import" href="time-duration.html">
<link rel="import" href="time-since.html">

<dom-module id="drone-feed-item">
	<template>
		<style include="drone-theme"></style>
		<style>
			:host a {
				padding: 20px;
				color: var(--drone-font-color);
				font-size: 15px;
				border-bottom: 1px solid var(--drone-border-color);
				display: block;
				text-decoration: none;
				position: relative;
			}

			:host a:hover {
				background-color: #EEE;
			}

			:host .header {
				margin-bottom: 10px;
				font-weight: normal;
				font-size: 16px;
			}

			:host .header span {
				max-width: 225px;
				display: inline-block;
			}

			:host .body {
				color: var(--drone-font-color-gray);
			}

			:host .body iron-icon ~ span {
				vertical-align: middle;
				line-height: 24px;
				font-size: 13px;
			}

			:host .body iron-icon {
				vertical-align: middle;
				margin-right: 2px;
				--iron-icon-width: 16px;
				--iron-icon-height: 16px;
			}

			:host drone-status {
				float: right;
				padding: 2px;
			}
		</style>

		<a href="/[[ repo.owner ]]/[[ repo.name ]]">
			<div class="header">
				<span>[[ repo.owner ]] / [[ repo.name ]]</span>
				<drone-status status="[[ repo.status ]]"></iron-icon>
			</div>
			<div class="body">
				<div>
					<iron-icon icon="image:timelapse"></iron-icon>
					<span><time-duration seconds="[[ _getDuration(repo) ]]"></time-duration></span>
				</div>
				<div>
					<iron-icon icon="device:access-time"></iron-icon>
					<span><time-since unix="[[ _getTime(repo) ]]"></time-since></span>
				</div>
			</div>
		</a>
	</template>

	<script>
		Polymer({
			is: "drone-feed-item",
			properties: {
				repo: Object
			},
			_getTime: function(repo) {
				return repo.finished_at ? repo.finished_at : repo.started_at;
			},
			_getDuration: function(repo) {
				return repo.finished_at ? repo.finished_at - repo.started_at : 0;
			}
		});
	</script>
</dom-module>
